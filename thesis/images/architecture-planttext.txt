@startuml

title Архитектура приложения
rectangle Хранилище {
(Хранилище шаблонов)
(Хранилище программ)
}

rectangle Генерация {
(Генератор IR)
(Генератор кода)
(Генератор изображений)
}

rectangle Проверка {
  (Система проверки)
  (Компилятор)
  (Скрипт запуска)
  (Верификация)
}

:User: as "Пользователь"
User -left--> (Web UI): "Ввод\nданных"
(Web UI) -right..> User: "Изображение/\nтекст программы"
(Сервер) -up...> (Web UI): "Байты\nизображения/\nтекста"
(Web UI) -down---> (Сервер): Запрос к API
(Сервер) -left----> (Хранилище шаблонов): "Получить\nшаблон" 
(Хранилище шаблонов) ....> (Сервер): "Шаблон\nпрограммы"
(Сервер) -down----> (Генератор IR): "Шаблон,\nпараметры"
(Генератор IR) ....> (Сервер): "Описание\nпрограммы\nна DSL"
(Сервер) ----> (Генератор кода): "Описание\nпрограммы\nна DSL"
(Генератор кода) ....> (Сервер): "Текст\nпрограммы"
(Сервер) ----> (Генератор изображений): "Текст\nпрограммы"
(Генератор изображений) ....> (Сервер): Изображение
(Сервер) -left---- (Хранилище программ): "Текст программы,\nизображение,\nпараметры"
(Сервер) -----> (Система проверки): "Текст программы,\nответ ученика"
(Верификация) -left......> (Сервер): "Результат\nпроверки"
(Система проверки) -right--> (Компилятор): "Текст\nпрограммы"
(Компилятор) -right--> (Скрипт запуска): "Исполняемый\nфайл"
(Скрипт запуска) -right--> (Верификация): "Вывод\n программы"
(Система проверки) -right-----> (Верификация): "Ответ студента"
@enduml